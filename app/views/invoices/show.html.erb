<h1>Invoice #<%= @invoice.id %></h1>
<section class="invoice-information">
  <p>Status: <%= @invoice.status.titleize %></p>
  <p>Created on: <%= @invoice.created_at.strftime('%A, %B %d, %Y') %></p>
  <p>Total Revenue: <%= @invoice.total_revenue %></p>
</section>
<section class="invoice-customer">
  <h3>Customer:</h3>
  <p><%= @invoice.customer.full_name %></p>
  <p><%= @invoice.customer.address %></p>
  <p><%= @invoice.customer.city %>, <%= @invoice.customer.state %> <%= @invoice.customer.zipcode %></p>
</section>
<section class="invoice-items">
  <h3>Items on this Invoice:</h3>
  <table class="table table-striped table-dark table-borderless " style="width:800px">
    <thead>
      <tr>
        <th>Item Name:</th>
        <th>Quantity:</th>
        <th>Unit Price:</th>
        <th>Status:</th>
      </tr>
    </thead>

  <% @invoice.invoice_items.each do |invoice_item| %>
    <tbody class="invoice-item-<%= invoice_item.id %>">
      <tr >
        <td><%= invoice_item.item.name %></td>
        <td><%= invoice_item.quantity %></td>
        <td><%= invoice_item.unit_price_dollar %></td>
        <td>
          <%= form_with url: "/invoice_items/#{invoice_item.id}", method: :patch, model: invoice_item,local: true, locals: {merchant_id: @merchant.id} do |f| %>
            <%= f.hidden_field :invoice_id, value: @invoice.id %>
            <%= f.hidden_field :merchant_id, value: @merchant.id %>
            <%= f.select(:status, ["pending", "packaged", "shipped"], value: :status) %>
            <%= f.submit "Update Item Status" %>
          <% end %>
        </td>
      </tr>
    </tbody>
  <% end %>
  </table>
</section>
